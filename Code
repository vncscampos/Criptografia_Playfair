#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <locale.h>

char** gerarTabela(char carac[]) {
    int tam = strlen(carac);
    for (int i = 0; i < tam; i++) { //embaralhar o vetor
        int r = rand() % tam;
        char aux = carac[i];
        carac[i] = carac[r];
        carac[r] = aux;
    }



    int k = 0;
    double tam2 = sqrt(strlen(carac));

    char **m = (char**) malloc(tam2 * sizeof (char*));
    for (int i = 0; i < tam2; i++) { //Percorre as linhas do Vetor de Ponteiros
        m[i] = (char*) malloc(tam2 * sizeof (char)); //Aloca um Vetor de Inteiros para cada posição do Vetor de Ponteiros.
        for (int j = 0; j < tam2; j++) { //Percorre o Vetor de Inteiros atual.
            m[i][j] = carac[k];
            k++;
        }
    }

    return m;
}

void imprimirTabela(char **matriz) {
    double tam = sqrt(sizeof (matriz));
    for (int i = 0; i < tam; i++) {
        for (int j = 0; j < tam; j++) {
            printf("%c ", matriz[i][j]);
        }
        putchar('\n');
    }
}

int main(int argc, char** argv) {
    setlocale(LC_ALL, "");
    int acao;
    char msgm[100];
    char carac[] = {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q',
        'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'};
    char **p;

    do {

        printf("Digite a ação que deseja fazer:\n");
        printf("1. Gerar tabela;\n");
        printf("2. Introduzir mensagem;\n");
        printf("3. Ver mensagem criptografada;\n");
        printf("4. Decriptografar mensagem;\n");
        printf("5. Editar tabela;\n");
        printf("6. Imprimir tabela;\n");
        printf("7. SAIR.\n");
        printf("_________________________\n");
        scanf("%d", &acao);
        int ch;
        while ((ch = getchar()) != '\n' && ch != EOF);  <<<<<<-------------------------------------------gay

        switch (acao) {
            case 1:
                p = gerarTabela(carac);
                break;

            case 2:
                printf("Digite a mensagem:\n ");
                fgets(msgm, 100, stdin);
                break;
            case 5:
                printf("Digite a ação que deseja fazer:\n");
                printf("1. Adicionar letras minusculas;\n");
                printf("2. Remover números;\n");
                printf("3. Adicionar caracteres especiais;\n");
                int acao2;
                scanf("%d", &acao2);
                if (acao2 == 1) {
                    char carac2[] = {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q',
                        'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'};
                    strcat(carac, carac2);
                    p = gerarTabela(carac);
                }
                if (acao2 == 2) {
                    char carac2[] = {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q',
                        'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'};
                    p = gerarTabela(carac2);
                }
                if (acao2 == 3) {
                    char carac2[] = {'Ç', 'Á', 'À', 'É', 'Í', 'Ó', 'Ú'};
                    strcat(carac, carac2);
                    p = gerarTabela(carac);
                }
                break;
            case 6:
                imprimirTabela(p);
                break;
        }


    } while (acao != 7);





    return (EXIT_SUCCESS);
}


